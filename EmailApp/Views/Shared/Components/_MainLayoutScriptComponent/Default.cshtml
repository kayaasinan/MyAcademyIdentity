@*
    Main Layout Script Component
*@

@* SweetAlert Script'i bu alanda *@

<script src="~/smartmail-main/lib/jquery/jquery.min.js"></script>
<script src="~/smartmail-main/lib/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="~/smartmail-main/lib/perfect-scrollbar/perfect-scrollbar.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="~/assets/js/script.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const userToggle = document.getElementById('user-toggle');
        const userMenu = document.getElementById('user-menu');
        const logoutLink = document.getElementById('logout-link');

        const messageToggle = document.getElementById('message-toggle');
        const messageMenu = document.getElementById('message-menu');

        userToggle.addEventListener('click', function (e) {
            e.stopPropagation();
            userMenu.classList.toggle('active');
            messageMenu.classList.remove('active');
        });

        messageToggle.addEventListener('click', function (e) {
            e.stopPropagation();
            messageMenu.classList.toggle('active');
            userMenu.classList.remove('active');
        });

    
        document.addEventListener('click', function (e) {
            if (!userToggle.contains(e.target) && !userMenu.contains(e.target)) {
                userMenu.classList.remove('active');
            }
            if (!messageToggle.contains(e.target) && !messageMenu.contains(e.target)) {
                messageMenu.classList.remove('active');
            }
        });

 
        logoutLink.addEventListener('click', function (e) {
            e.preventDefault();

            Swal.fire({
                title: 'Emin misiniz?',
                text: 'Oturumunuz sonlandırılacak.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Evet, çıkış yap!',
                cancelButtonText: 'İptal'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = logoutLink.getAttribute('href');
                }
            });
        });
    });
</script>
<script>
    function deletedMessagePermenantly(id) {
        Swal.fire({
            title: "Mesajı kalıcı olarak silmek istediğinizden emin misiniz?",
            text: "Bu işlemi geri alamazsınız!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Evet, Sil!",
            cancelButtonText: "İptal"
        }).then((result) => {
            if (result.isConfirmed) {
                fetch("/Message/DeleteTrashBoxMessage/" + id, {
                    method: "POST"
                }).then(() => {
                    location.reload();
                });
            }
        });
    }
</script>
<script>
    function deletedMessage(id){
        Swal.fire({
            title: "Mesajı çöp kutusuna göndermek istediğinizden emin misiniz?",
            text: "Geri almak için ÇÖP KUTUSU sayfasına gidiniz!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Evet, Sil!",
            cancelButtonText: "İptal"
        }).then((result) => {
            if(result.isConfirmed){
                window.location.href = "/Message/DeleteMessage/" + id;
            }
        });
    }
</script>
